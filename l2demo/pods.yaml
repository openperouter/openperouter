apiVersion: "k8s.cni.cncf.io/v1"
kind: NetworkAttachmentDefinition
metadata:
  name: macvlan110
spec:
  config: '{
      "cniVersion": "0.3.0",
      "type": "macvlan",
      "master": "host110",
      "mode": "bridge",
      "ipam": {
         "type": "static",
         "routes": [
              {
                "dst": "0.0.0.0/0",
                "gw": "192.170.1.0"
              }
            ]
      }
    }'
---
apiVersion: "k8s.cni.cncf.io/v1"
kind: NetworkAttachmentDefinition
metadata:
  name: macvlan210
spec:
  config: '{
      "cniVersion": "0.3.0",
      "type": "macvlan",
      "master": "host210",
      "mode": "bridge",
      "ipam": {
         "type": "static",
         "routes": [
              {
                "dst": "0.0.0.0/0",
                "gw": "192.171.1.0"
              }
            ]
      }
    }'
---
apiVersion: v1
kind: Pod
metadata:
  name: first110
  annotations:
    k8s.v1.cni.cncf.io/networks: '[{
      "name": "macvlan110",
      "namespace": "default",
      "ips": ["192.170.1.3/24"]
      }]'
spec:
  tolerations:
  - effect: NoSchedule
    key: node-role.kubernetes.io/master
    operator: Exists
  - effect: NoSchedule
    key: node-role.kubernetes.io/control-plane
    operator: Exists
  nodeSelector:
    kubernetes.io/hostname: pe-kind-control-plane
  containers:
    - name: client
      securityContext:
        capabilities:
          add:
            - NET_ADMIN
      image: quay.io/fpaoline/fedoranet:2.0
      command: ["/bin/sh", "-c"]
      args:
        ["sleep INF"]
---
apiVersion: v1
kind: Pod
metadata:
  name: second110
  annotations:
    k8s.v1.cni.cncf.io/networks: '[{
      "name": "macvlan110",
      "namespace": "default",
      "ips": ["192.170.1.4/24"]
      }]'
spec:
  nodeSelector:
    kubernetes.io/hostname: pe-kind-worker
  containers:
    - name: client
      image: quay.io/fpaoline/fedoranet:2.0
      securityContext:
        capabilities:
          add:
            - NET_ADMIN
      command: ["/bin/sh", "-c"]
      args:
        ["sleep INF"]
---
apiVersion: v1
kind: Pod
metadata:
  name: first210
  annotations:
    k8s.v1.cni.cncf.io/networks: '[{
      "name": "macvlan210",
      "namespace": "default",
      "ips": ["192.171.1.3/24"]
      }]'
spec:
  tolerations:
  - effect: NoSchedule
    key: node-role.kubernetes.io/master
    operator: Exists
  - effect: NoSchedule
    key: node-role.kubernetes.io/control-plane
    operator: Exists
  nodeSelector:
    kubernetes.io/hostname: pe-kind-control-plane
  containers:
    - name: client
      securityContext:
        capabilities:
          add:
            - NET_ADMIN
      image: quay.io/fpaoline/fedoranet:2.0
      command: ["/bin/sh", "-c"]
      args:
        ["sleep INF"]
---
apiVersion: v1
kind: Pod
metadata:
  name: second210
  annotations:
    k8s.v1.cni.cncf.io/networks: '[{
      "name": "macvlan210",
      "namespace": "default",
      "ips": ["192.171.1.4/24"]
      }]'
spec:
  nodeSelector:
    kubernetes.io/hostname: pe-kind-worker
  containers:
    - name: client
      securityContext:
        capabilities:
          add:
            - NET_ADMIN
      image: quay.io/fpaoline/fedoranet:2.0
      command: ["/bin/sh", "-c"]
      args:
        ["sleep INF"]
